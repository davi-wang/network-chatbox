# 功能亮点

> 基础功能以外 答辩的时候优先考虑展示的功能

### 可以从UI展示的

- 好友列表同步：别人加你你能立即看到
- 历史消息同步：离线时或窗口关闭时，收到的消息再开窗口时可以看到
- 搜索式添加好友：可以按关键字搜索用户，选择匹配的用户并添加为好友
- 公共聊天室：实时与其他在线用户聊天，无需添加好友，并且不会留下记录
- 多个独立聊天框：同时打开若干个好友的聊天框，收发消息互不影响

### 较难从UI展示的

- 注册时向发送邮箱验证码，使用SMTP服务
- 通信实现，消息头编码解码、JSON字节数校验、心跳检测死连接
- 数据库，保存好友关系，保存历史消息
- 使用Git进行版本控制和协同开发，使用Gitee云端托管git仓库

# 项目demo 预计3分钟

1. 输入服务器IP+端口
2. 台上演示者A注册 -> 验证邮箱 -> 登录
3. 演示者账号添加好友，搜索Fu，俩Fu，选择想要的好友
4. 台下演示者B加台上演示者好友
5. 展示好友列表的变化（有两个好友）
6. 点开好友聊天，展示互相对话
7. 退出窗口，台下B发消息，打开窗口，展示历史消息同步
8. 不关闭窗口，展示再打开另一个好友窗口并发消息
9. 点击Join chat room，进入公共聊天室
10. 台下两位BC加入聊天室，展示在线用户的实时变化，并聊天

# 完整功能列表

## 客户端功能

- 选择服务器的IP地址和端口
- 以邮箱为账号注册
- 邮箱验证功能，以确保邮箱的有效性
- 密码发给服务器前做MD5散列处理
- 登录页面可以记忆若干曾经登录的账号密码，并且可以用下拉框选择
- 主页面好友列表上方 可以显示自己的昵称和UID
- 具有添加好友功能，可根据昵称或邮箱搜索用户，并显示匹配的所有用户，以选择一位添加为好友
- 添加成功后，双方的好友列表会立刻显示新好友
- 具有与好友一对一实时聊天功能
- 聊天框内显示每条信息的发送时间和发送者昵称
- 聊天框内可以修改文本样式
- 聊天框可以显示自己不在线时给自己发过的消息（收离线消息）
- 聊天框内可以保存双方的历史聊天记录
- 可以同时打开若干个聊天框与好友聊天
- 具有公共聊天室功能，所有用户可在主界面进入公共聊天室，与其他在聊天室内的多位用户实时聊天
- 界面右侧可以实时显示在聊天室内的所有用户昵称
- 聊天室内无需加好友，多人互聊，且不会显示历史消息

## 服务端功能

- 监听连接，将网络状态实时显示到界面以供维护者查阅
- 重写QTcpServer的新连接信号，以传递连接实例的指针；重写QTcpServer接受新连接的槽函数，以手动创建连接实例
- 管理多个连接实例，处理来自多个连接的请求，消息类型分拣
- 管理已登录用户映射，可以向客户端同步用户是否在线
- 数据库：保存已注册用户的信息，保存好友关系，保存所有聊天消息记录

## 通信功能

- 使用JSON在客户端与服务端之间交换数据
- 双方互发心跳，检测连接是否有效，切断死连接
- 统一编制/解码消息头，其中包含消息类型和JSON串字节数
- 封装Socket并向客户端和服务端提供统一的通信接口













